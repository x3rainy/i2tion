<h1>My Bookings</h1>
<div class="d-flex">
  <div class="d-flex flex-column justify-content-center align-items-center p-3">
    <% if params[:tutor_id].nil? %>
      <% @bookings.sort.each do |booking| %>
        <% if booking.user == current_user %>
         <div class="d-flex flex-column my-3">
          <div class="card-product" style="width: 600px; height: 200px">
            <%= cl_image_tag booking.tutor.photo, width: 300, height: 400, crop: :fill, gravity: :face %>
            <div class="card-product-infos">
              <h2>Booking with <%= booking.tutor.user.name %> </h2>
              <p>Location: <%= booking.location %></p>
              <p>Comments: <%= booking.comments %></p>
              <p>Start: <%= booking.start_datetime %></p>
              <p>End: <%= booking.end_datetime %></p>
            </div>
          </div>
          <div class="btn btn-secondary btn-outline-dark btn-lg">
            <div class="d-flex justify-content-around align-items-center">
            <h4><%= link_to "ðŸ”", booking_path(booking), class: "btn btn-light" %></h4>
            <h4><%= link_to "ðŸ–‹", edit_tutor_booking_path(booking.tutor, booking.id), class: "btn btn-light" %></h4>
            <h4><%= link_to "ðŸ”¥", tutor_booking_path(booking.tutor, booking.id), method: :delete, class: "btn btn-danger" %>
            </div>
          </div>
        </div>
        <% end %>
      <% end %>
      <% else %>
        <% @bookings.sort.each do |booking| %>
          <% if booking.tutor == current_user.tutor %>
          Display only bookings that I booked, not everyone else's bookings
           <div class="d-flex flex-column my-3">
            <div class="card-product">
              <% if booking.user.tutor.nil? == false && booking.user.tutor.photo? %>
                <%= cl_image_tag booking.user.tutor.photo, width: 300, height: 400, crop: :fill, gravity: :face %>
              <% else %>
                <%= image_tag "https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_960_720.png", height: 300, width: 400 %>
              <% end %>
              <div class="card-product-infos">
                <h2>Booked by <%= booking.user.name %> </h2>
                <p>Location: <%= booking.location %></p>
                <p>Comments: <%= booking.comments %></p>
                <p>Start: <%= booking.start_datetime %></p>
                <p>End: <%= booking.end_datetime %></p>
              </div>
            </div>
            <div class="btn btn-secondary btn-outline-dark btn-lg">
              <div class="d-flex justify-content-around align-items-center ">
              <h4><%= link_to "ðŸ”", booking_path(booking), class: "btn btn-light" %></h4>
              <h4><%= link_to "ðŸ–‹", edit_tutor_booking_path(booking.tutor, booking.id), class: "btn btn-light" %></h4>
              <h4><%= link_to "ðŸ”¥", tutor_booking_path(booking.tutor, booking.id), method: :delete, class: "btn btn-danger" %></h4>
              </div>
            </div>
          </div>
          <% end %>
        <% end %>
    <% end %>
  </div>
  <div
  id="map"
  style="width: 100%;
  height: 600px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
  ></div>
</div>
